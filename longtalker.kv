#:kivy 2.1.0

# Tkinter版のレイアウトをKivyのBoxLayoutで再現
<LongTalkerLayout>:
    orientation: 'vertical'
    padding: dp(10)
    spacing: dp(10)

    # テキスト入力エリア (TkinterのText)
    TextInput:
        id: text_input
        text: ''
        hint_text: 'ここに読み上げたいテキストを入力してください'
        size_hint_y: 0.6 # 画面の60%を占める
        font_size: '18sp' # フォントサイズを調整
        multiline: True # 複数行入力可能
        valign: 'top' # 上揃え
        padding: dp(10) # 内側のパディング

    # 操作ボタンと言語選択をまとめる水平フレーム (Tkinterのbutton_frame)
    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None # 高さを固定
        height: dp(48) # Tkinterの高さに合わせる
        spacing: dp(5) # ボタン間のスペース

        Label:
            text: '言語:'
            size_hint_x: None # 幅をコンテンツに合わせる
            width: dp(60)
            halign: 'left' # 左揃え
            valign: 'middle' # 中央揃え

        Spinner:
            id: lang_spinner
            text: root.selected_lang_display # 初期表示
            values: root.languages_for_kivy # Python側で定義したリスト
            size_hint_x: None # 幅を固定
            width: dp(150) # Comboboxの幅に合わせる
            on_text: root.set_lang_code(self.text) # 選択が変更されたらPythonのメソッドを呼び出す

        Widget: # スペーサー (Tkinterのpadx=(0, 20)の代わり)
            size_hint_x: None
            width: dp(20)

        Button:
            id: paste_button
            text: '貼り付け'
            size_hint_x: None
            width: dp(100) # ボタンの幅
            on_release: root.paste_text() # ボタンが離されたらメソッドを呼び出す

        Button:
            id: clear_button
            text: 'クリア'
            size_hint_x: None
            width: dp(100) # ボタンの幅
            on_release: root.clear_text()

    # メインの実行ボタン (Tkinterのcreate_button)
    Button:
        id: create_button
        text: '音声ファイルを作成して再生'
        size_hint_y: None
        height: dp(55) # 少し大きめに
        font_size: '18sp' # フォントサイズ
        background_normal: '' # デフォルトの背景画像を無効化
        background_color: 0.29, 0.68, 0.31, 1 # #4CAF50のRGBa値 (Kivyは0-1で指定)
        color: 1, 1, 1, 1 # 文字色 (白)
        on_release: root.start_audio_process() # ボタンが離されたらメソッドを呼び出す

    # ステータス表示用ラベル (Tkinterのstatus_label)
    Label:
        id: status_label
        text: root.status_text # Python側で定義したプロパティ
        size_hint_y: None
        height: dp(30) # 高さを固定
        text_size: self.width, None # テキストの折り返しを有効に
        halign: 'left' # 左揃え
        valign: 'top' # 上揃え
        color: root.ids.status_label.color # Python側で設定した色を反映
